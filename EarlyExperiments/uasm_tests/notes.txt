# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ EXE-—Ñ–∞–π–ª–∞
# https://habr.com/ru/post/515058/


# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
# –ü—Ä–æ–±—É—é –ø—Ä–∏–¥—É–º–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–≥–æ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞
# –ü–û –°–£–¢–ò —ç—Ç–æ —è–∑—ã–∫, –∫–æ—Ç–æ—Ä—ã–π –±—É–∫–≤–∞–ª—å–Ω–æ –Ω–∞ –≤—ã—Ö–æ–¥–µ –∑–∞–¥–∞–µ—Ç –±–∞–π—Ç—ã
# –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –º–æ–∂–Ω–æ —á—Ç–æ —É–≥–æ–¥–Ω–æ, –≤–ø–ª–æ—Ç—å –¥–æ —Ä—É—á–Ω–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –±–∞–π—Ç–æ–≤
# –ù–æ —è —Ö–æ—á—É —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫ —á—Ç–æ –±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–≤–æ–∏ –∞—Å—Å–µ–º–±–ª–µ—Ä—ã –∏ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤
# –ó–∞ –æ—Å–Ω–æ–≤—É —è –≤–∑—è–ª –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–π –∞—Å—Å–µ–º–±–ª–µ—Ä –∏–∑ –∏–≥—Ä—ã Virtual Circuit Board (VCB)
# –ù–æ –≤ VCB –∞—Å—Å–µ–º–±–ª–µ—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 4-—Ö –±–∞–π—Ç–æ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏.
# –Ø —Ö–æ—á—É –±–æ–ª–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞—Å—Å–µ–º–±–ª–µ—Ä.
# –û–¥–Ω–∞–∫–æ —Ç—É—Ç –µ—Å—Ç—å –∏ –≥–ª–∞–≤–Ω—ã–π –º–∏–Ω—É—Å - –æ—Ä–∏–≥–∏–Ω–∞–ª –∏–∑ VCB –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å —Å–∏–ª—å–Ω–æ —É—Å–ª–æ–∂–Ω–∏—Ç –µ–≥–æ.

# –°–∏–º–≤–æ–ª—ã –∏ —Å—Ç—Ä–æ–∫–∏
# –ò –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –≤ —Ç–µ–∫—É—â–∏–π –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º—ã–π —Ñ–∞–π–ª
include 'def.x86.uasm'
include 'def.exe_header.uasm'
# —Å—Ç—Ä–æ–∫–∏, –∫—Å—Ç–∞—Ç–∏, –ø–∞—Ä—Å–∏—Ç—å –∫–∞–∫ utf8 –∏–ª–∏ –∫–∞–∫ ascii? –í–û–ü–†–û–°!

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤
symbol  MOV         NEXT    0b01_000_000
symbol  MOV.ax      OR      0b00_001_000    # —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Å–±–æ—Ä–∫–∏ –±–∞–π—Ç–æ–≤
symbol  MOV._.ax    OR      0b00_000_001    # OR –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ —Ç–µ–∫—É—â–∏–π –±–∞–π—Ç –±—É–¥–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω —Å —Ä–∞–Ω–µ–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º –±–∞–π—Ç–æ–º —á–µ—Ä–µ–∑ –ø–æ–±–∏—Ç–æ–≤–æ–µ OR
symbol  JMP         NEXT    0b10__000000    # NEXT - —á—Ç–æ –Ω–æ–≤—ã–π –±–∞–π—Ç –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ü–û–°–õ–ï
symbol  FAR         NEXT    0b11__000000    # –í–æ–∑–º–æ–∂–Ω–æ –µ—â–µ –Ω—É–∂–Ω–æ –∑–∞–ª–∞—Ç—å AND
# –í–æ–∑–º–æ–∂–Ω–æ —Å—Ç–æ–∏—Ç —Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á–∏ OR, AND, NEXT –ø–æ—Å–ª–µ –∑–Ω–∞—á–µ–Ω–∏—è
# –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Å —Ç–æ—á–∫–∞–º–∏ –∏ –ø—Ä–æ—á–µ—Ä–∫–∞–º–∏ - —É—Å–ª–æ–≤–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è —Å–∏–º–≤–æ–ª–∞ - —Å–∏–º–≤–æ–ª –∑–∞–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ —á—Ç–æ –ø–µ—Ä–µ–¥ –Ω–∏–º —à–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã

# –í–æ–æ–±—â–µ –≤ —Ä–∞–º–∫–∞—Ö VCS –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã OR-—è—Ç—Å—è –≤–º–µ—Å—Ç–µ.
# –ù–û. –¢–∞–º –≤—Å–µ–≥–¥–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤ 4 –±–∞–π—Ç–∞. –ê –ø–æ—Å–∫–æ–ª—å–∫—É —è —Ö–æ—á—É –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ä–∞–∑–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω—ã—Ö –∫–æ–º–∞–Ω–¥, —Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ —è–≤–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
# –≠—Ç–æ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –º–µ–Ω—è –æ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –≤—ã—Ä–∞–∂–µ–Ω–∏—é
# –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å MOV ax, ax MOV bx, bx –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –∏ —ç—Ç–æ –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.

# –ú–∞–∫—Ä–æ—Å—ã?
# –ú–∞–∫—Ä–æ—Å—ã –ø–æ–∑–≤–æ–ª—è—Ç —Å–∏–ª—å–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å —è–∑—ã–∫–∏ –Ω–∞ —Ö–æ–¥—É
# –ù–æ –∏ —É—Å–ª–æ–∂–Ω—è—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å. –ü–ª—é—Å —É –º–µ–Ω—è –≤–æ–∑–Ω–∏–∫–∞—é—Ç –º—ã—Å–ª–∏, —á—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ —Å—Ç–æ–∏—Ç –∑–∞–¥–∞–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ª–æ–≤–∞–º–∏,
# –∞ —Å–ª–æ–≤–∞–º–∏ —Å–æ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–º, —á—Ç–æ –±—ã –∏—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ –æ—Ç–ª–∏—á–∞—Ç—å. –ö–∞–∫ –≤ C –Ω–∞–ø—Ä–∏–º–µ—Ä #define
macros  NAME    arg1 arg2 arg3
    # —Ç—É—Ç –º–æ–∂–Ω–æ –ø–æ –∏–¥–µ–µ —Å–¥–µ–ª–∞—Ç—å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫, –¥–∞ –µ—â–µ –∏ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ–º –º–∞–∫—Ä–æ—Å–æ–≤
    # –ø–æ—á–∏—Ç–∞–ª –ø—Ä–æ –º–∞–∫—Ä–æ—Å—ã –≤ –°/–°++ - —Ç–∞–º –æ–Ω–∏ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –í–°–ï–ì–î–ê –û–î–ù–û–°–¢–†–û–ß–ù–´–ï. –ú–∞–º–∞ –Ω–µ –≥–æ—Ä—é–π))
end

# –û—Å—Ç–∞–µ—Ç—Å—è –≤–æ–ø—Ä–æ—Å —Å –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–º–∏ –º–∞–∫—Ä–æ—Å–∞–º–∏.
# –ù—É–∂–Ω—ã? –ò –µ—Å–ª–∏ –¥–∞, —Ç–æ –∫–∞–∫–∏–µ –∏ –¥–ª—è —á–µ–≥–æ

# –í—ã—Ä–∞–∂–µ–Ω–∏—è, –≤—ã—á–∏—Å–ª–∏–º—ã–µ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
# –≠—Ç–æ —Ç–æ–∂–µ –≤–∑—è—Ç–æ –∏–∑ VCB
# –ª—é–±–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–∫–æ–±–∫–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
	( MOV + DROP * 15 )
# –≠—Ç–æ –≤–ø—Ä–∏–Ω—Ü–∏–ø–µ –ª–æ–≥–∏—á–Ω–æ

# –£–∫–∞–∑–∞—Ç–µ–ª–∏
# –ü–æ —Å—É—Ç–∏ —É–∫–∞–∑–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—Ä–∞—Ç—å —Ç–µ–∫—É—â–∏–π –∞–¥—Ä–µ—Å —Å–±–æ—Ä–∫–∏.
# –ü–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ
# symbol .pointer $ CLR
# $ –æ–∑–Ω–∞—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∞–¥—Ä–µ—Å –±–∞–π—Ç–∞ –ø—Ä–∏ –∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞–Ω–∏–∏
.pointer
    MOV ax, ax      # 0b01_000_000 | 0b00_001_000 | 0b00_000_001 -> 0b01_001_001
    JMP .pointer    # 0b10__000000 0b(–ê–î–†–ï–° pointer-–∞)

# –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —è —Ö–æ—á—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è —Å—Ç–∞–≤–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∏–¥—ã –∫–æ–º–∞–Ω–¥—ã?
# –ê –º–æ–∂–µ—Ç —Ö–µ—Ä –∑–∞–±–∏—Ç—å?
    JMP ($ - .pointer)      # –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä—ã–∂–æ–∫? –ê –∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä –±–∞–π—Ç —Ç—É—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å?
    JMP ($ - .pointer){2}   # –ï—Å–ª–∏ –≤–æ—Ç —Ç–∞–∫... —Ç–æ –º—ã —É–∂–µ –∏–º–µ–µ–º —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π!
    # –¢–æ –µ—Å—Ç—å —Ç—É—Ç –≤–æ–ø—Ä–æ—Å –≤ —Ç–æ–º, –∫–∞–∫ –∏–∑ —Ä–∞—Å—Å—á–µ—Ç–æ–≤ –≤—ã–≤–æ–¥–∏—Ç—å –∂–µ–ª–∞–µ–º–æ–µ –∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç.

# –û—Ç–∫—É–¥–∞ –Ω–æ–≥–∏ —É —ç—Ç–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞?
# –í –∞—Å—Å–µ–º–±–ª–µ—Ä–∞—Ö x86 –µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ—Ö–æ–¥–∞, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –Ω–∞ —Ä–∞–∑–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø—Ä—ã–∂–∫–∞
# –ò –µ—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–Ω—å—á—à–µ 127 —Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç –∑–∞–Ω–∏–º–∞–µ—Ç 1 –±–∞–π—Ç, –∏–Ω–∞—á–µ 2 –∏–ª–∏ 4
# –ê —ç—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –º–Ω–µ –∫–∞–∫-—Ç–æ –Ω–∞–¥–æ –ø—Ä–∏–º–∏—Ç–∏–≤—É –∑–∞–¥–∞–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä

# –ù–∞–ø—Ä–∏–º–µ—Ä —É –Ω–∞—Å –µ—Å—Ç—å —Å–∏–º–≤–æ–ª PTR, –∏–º–µ—é—â–∏–π –≤ —Å–µ–±–µ —á–∏—Å–ª–æ —Ä–∞–∑–º–µ—Ä–æ–º –≤ 4 –±–∞–π—Ç–∞
# –ò –Ω–∞–¥–æ —ç—Ç–æ —á–∏—Å–ª–æ –æ–±—Ä–µ–∑–∞—Ç—å –¥–æ –æ–¥–Ω–æ–≥–æ
# –ö–∞–∫ —ç—Ç–æ –∑–∞–ø–∏—Å–∞—Ç—å —Ç–∞–∫ —á—Ç–æ –±—ã –Ω–µ —Å–∏–ª—å–Ω–æ –≤—ã–±–∏–≤–∞–ª–æ—Å—å –∏–∑ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–≥–æ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞?
# –û–∫–µ–π, —Ç–∏–ø –∫–æ–º–∞–Ω–¥—ã –æ–ø—Ä–µ–¥–µ–ª–∏–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —Å—É—Ñ—Ñ–∏–∫—Å–æ–º
symbol  JMP    NEXT     0x80
symbol  NEAR   OR       0x00
symbol  LONG   OR       0x81
# –¢–æ–≥–¥–∞ –∫–∞–∫ –∫—Ä–∞—Å–∏–≤–µ–µ –∑–∞–ø–∏—Å–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–π—Ç–æ–≤
    JMP NEAR .PTR        # –ë—É–¥–µ—Ç 5 –±–∞–π—Ç, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ –∞–¥—Ä–µ—Å: 0x80 0xXXXXXXXX
    JMP NEAR ($-.PTR)    # –ë—É–¥–µ—Ç 5 –±–∞–π—Ç, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ –∞–¥—Ä–µ—Å: 0x80 0xYYYYYYYY, –Ω–æ –∞–¥—Ä–µ—Å —Ç–µ–ø–µ—Ä—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π
    JMP NEAR PTR:REL    # –í —Ç–∞–∫–æ–º –≤–∏–¥–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á—Ç–æ –±—ã –±—ã–ª–æ 0x80 0xYY, –ù–û —ç—Ç–æ –±—É–¥–µ—Ç –ø–∏–ø–µ—Ü –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è —Å–ª—É—á–∞—è
    JMP NEAR ($-.PTR){1}     # –ù–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
    JMP NEAR ($-.PTR)[1]     # –ù–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
    JMP NEAR (byte)($-.PTR)  # –ù–æ–≤–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ + —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

# –ï—â–µ –≤–∞—Ä–∏–∞–Ω—Ç
symbol  JMP.NEAR.@  NEXT ($ - @)
# –∑–¥–µ—Å—å —Å–æ–±–∞–∫–∞ @ –æ–∑–Ω–∞—á–∞–µ—Ç —Å—Å—ã–ª–∫—É –∞ $ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –≤ –±–∞–π—Ç–∞—Ö
# –ù–û, —Ç—É—Ç –ø—Ä–∏–¥–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —á—Ç–æ –±—ã —Å–∏–º–≤–æ–ª –ò–°–ü–û–õ–ù–Ø–õ–°–Ø –≤ –º–µ—Å—Ç–µ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏
# —Ç–æ –µ—Å—Ç—å –ø–æ —Å—É—Ç–∏ - –±—ã–ª —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å—é –º–∞–∫—Ä–æ—Å–∞
    JMP NEAR .PTR
# –ù–æ —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Å–∏—Å—Ç–µ–º–∞ –ª—É—á—à–µ
# –ü–ª—é—Å –æ—Å—Ç–∞–µ—Ç—Å—è –≤–æ–ø—Ä–æ—Å —Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ–º –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞ –±–∞–π—Ç

# –¢–∞–∫... –ö–∞–∫–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã?
($ - @){1}
($ - @)[1]
(byte)($ - @)
(i08)($ - @)
(i16)($ - @)
(i32)($ - @)
i08:($ - @)
i16:($ - @)
i32:($ - @)
1b:($ - @)
2b:($ - @)
b4:($ - @)
($ - @):4b
($ - @):4
1:($ - @)
4:($ - @)

# –í—ã–≥–ª—è–¥–∏—Ç –Ω–µ –ø–ª–æ—Ö–æ
# –¢–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—è—Å—å –∫ –º–∞–∫—Ä–æ—Å–∞–º–∏

symbol X._.@ NEXT ($ - @)

#–ß—Ç–æ –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ –∫–∞–∫ –ø—Ä–µ–º–µ–Ω–Ω—ã–µ...
symbol X.@1.@2 NEXT ($ - @2)

# –ù–µ —Ö—É–π–Ω—è –ª–∏ –ø–æ–ª—É—á–∏—Ç—Å—è?
# –ê –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ –º–∞–∫—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å?

macros GROUP arg1 arg2 arg3
    # —Å–∏–º–≤–æ–ª—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º
    MOV ax, arg1
    MOV bx, arg2
    MOV cx, arg3
end
# —Ç–æ–≥–¥–∞
GROUP 1 2 3
# –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—Å—è –≤ 
    MOV ax, 1
    MOV bx, 2
    MOV cx, 3
# —Ç–æ –µ—Å—Ç—å –æ–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ –∑–∞–±–∏—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞ –Ω–∏–º —Å–∏–º–≤–æ–ª—ã –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
# –ö—Å—Ç–∞—Ç–∏ –≤–æ–ø—Ä–æ—Å, –∫–∞–∫ –æ–±—ä—è–≤–∏—Ç—å MOV —Ç–∞–∫, —á—Ç–æ –±—ã —É—á–µ—Å—Ç—å —á—Ç–æ –æ–¥–∏–Ω –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ - –±–∞–π—Ç?
# –ü–∏–ø–µ—Ü —è–∑—ã–∫ —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è....




push cs
pop ds
mov dx, 0x0E
mov ah, 0x09
int 0x21
mov ax, 0x4C01
int 0x21
"This program cannot be run in DOS mode.\x0D\x0A$"




0E 1F BA 0E 00 B4 09 CD 21 B8 01 4C CD 21
0E
1F
BA 0E 00
B4 09
CD 21
B8 01 4C
CD 21


00001110
0E
push cs

00011111
1F
pop ds

10111010 00001110 00000000
BA 0E 00
mov dx, 0x0E

10110100 00001001
B4 09
mov ah, 0x09

11001101 00100001
CD 21
int 0x21

10111000 00000001 01001100
B8 01 4C
mov ax, 0x4C01

11001101 00100001
CD 21
int 0x21

"This program cannot be run in DOS mode.\x0D\x0A$" ; –í—ã–≤–æ–¥–∏–º–∞—è —Å—Ç—Ä–æ–∫–∞





0x0000000000000000:  0E          push cs
0x0000000000000001:  1F          pop  ds
0x0000000000000002:  BA 0E 00    mov  dx, 0xe
0x0000000000000005:  B4 09       mov  ah, 9
0x0000000000000007:  CD 21       int  0x21
0x0000000000000009:  B8 01 4C    mov  ax, 0x4c01
0x000000000000000c:  CD 21       int  0x21

0x0000000000000000:  0E                push cs
0x0000000000000001:  1F                pop  ds
0x0000000000000002:  BA 0E 00 B4 09    mov  edx, 0x9b4000e
0x0000000000000007:  CD 21             int  0x21
0x0000000000000009:  B8 01 4C CD 21    mov  eax, 0x21cd4c01




symbol MOV.:4.ax (0x0E <: 4)
–ï—Å–ª–∏ –ø–æ—Å–ª–µ MOV –∏–¥—ë—Ç 4 –±–∞–π—Ç–∞, —Ç–æ –±–∞–π—Ç 0x0E –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 4 –±–∞–π—Ç–∞ –ª–µ–≤–µ–µ

–î–∞–∂–µ –Ω–µ —Ç–∞–∫

–ü–æ —Å—É—Ç–∏ –≤—Å–µ —á—Ç–æ –º—ã –¥–µ–ª–∞–µ–º - –º–µ–Ω—è–µ–º –±–∞–π—Ç—ã –∏ –±–∏—Ç—ã
–ê —ç—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –æ—Ç—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–µ–Ω—è—é—Ç –±–∞–π—Ç—ã –∏ –±–∏—Ç—ã
–ò —Å–º–µ—â–∞—é—Ç –∫–∞—Ä–µ—Ç–∫—É üßê

–ê —Ç–∞–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤—Å–µ–≥–æ —Ç—Ä–∏:
- —Å–¥–≤–∏–≥ —É–∫–∞–∑–∞—Ç–µ–ª—è
- —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ –∑–∞–ø–∏—Å–∏ (SET, AND, OR)
- –∏, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, –∑–∞–ø–∏—Å—å!

–ò —Ç–æ–≥–¥–∞ –ª—é–±–æ–π —Å–ª–æ–∂–Ω—ã–π —Å–∏–º–≤–æ–ª - –ø—Ä–æ—Å—Ç–æ –ø–∞—á–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π, –æ–±–º–∞–∑–∞–Ω–Ω—ã—Ö —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–º —Å–∞—Ö–∞—Ä–æ–º!

–û—Å—Ç–∞–Ω–µ—Ç—Å—è —Ä–µ—à–∏—Ç—å –∫–∞–∫ –ø—Ä–∏—Å–æ–≤–æ–∫—É–ø–∏—Ç—å —É—Å–ª–æ–≤–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ.

–ò –ø–æ —Å—É—Ç–∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —á—Ç–æ –º—ã —Å–æ–∑–¥–∞–ª–∏ –Ω–µ —è–∑—ã–∫, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è, –∞ —è–∑—ã–∫, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∏ —É –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è - –∑–∞–ø–∏—Å—å –±–∞–π—Ç–∞ –≤ –±—É—Ñ–µ—Ä –ø–æ –∞–¥—Ä–µ—Å—É!

–£ –º–µ–Ω—è –∫–∞–∫ –æ–±—ã—á–Ω–æ –ø—Ä–∏—Å—Ç—É–ø –≥–µ–Ω–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –≤–æ –≤—Ç–æ—Ä–æ–º —á–∞—Å—É –Ω–æ—á–∏ üòÖ

symbol MOV 0x80
symbol MOV [ SET 0x80 :> 1 ]
symbol MOV.:4.AX [ <: 4 OR 0x0C :> 5 ]

–ß—Ç–æ-—Ç–æ —Ç–∞–∫–æ–µ

–ë–ª–∏–Ω
–≠—Ç–æ –±–ª–∏–∑–∫–æ –ø–æ —Å–º—ã—Å–ª—É –∫ FORTH, –Ω–æ –Ω–µ —Ç–æ –∂–µ —Å–∞–º–æ–µ
–ù–æ –ø—Ä–∏–∫–æ–ª—å–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç


–ï—â–µ —É–ø—Ä–æ—Å—Ç–∏–º, –∏ –ø–æ–ª—É—á–∏–º –±–∞–∑–æ–≤—ã–π —è–∑—ã–∫ –æ–ø–µ—Ä–∞—Ü–∏–π:
–°–¥–≤–∏–≥–∏:
  <4 –≤–ª–µ–≤–æ –Ω–∞ 4 –±–∞–π—Ç–∞
  5> –≤–ø—Ä–∞–≤–æ –Ω–∞ 5 –±–∞–π—Ç
–ó–∞–ø–∏—Å—å –æ–¥–Ω–æ–≥–æ –±–∞–π—Ç–∞
  0x00
  0b00000000
  0xFFFFFFFF –∑–∞–ø–∏—Å—å 4 –±–∞–π—Ç
–ó–∞–¥–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∑–∞–ø–∏—Å–∏ –±–∞–π—Ç
  SET       –ë–∞–π—Ç—ã –∑–∞–º–µ—â–∞—é—Ç —Ç–µ–∫—É—â–∏–µ –±–∞–π—Ç—ã (–ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ)  
  OR        –ë–∞–π—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ –ò–õ–ò
  AND       –ë–∞–π—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ –ò
  XOR       –ë–∞–π—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ –∏—Å–∫–ª—é—á–∞–µ—â–µ–≥–æ –ò–õ–ò
  APPEND    –¢–æ –∂–µ —á—Ç–æ SET, –Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–æ–º —Å–º–µ—â–∞—é—Ç –∫–∞—Ä–µ—Ç–∫—É –Ω–∞ –∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç

UPD
–ù–∞–º –≤—Å–µ –µ—â–µ –Ω—É–∂–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö –±–∞–∑–æ–≤–æ–≥–æ —è–∑—ã–∫–∞ –∏–º–µ—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, —Ç–µ–∫—É—â–µ–µ —Å–º–µ—â–µ–Ω–∏–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∫–∞–∫ –∫ –∑–∞–ø–∏—Å–∏ —Ç–∞–∫ –∏ –∫ —Å–º–µ—â–µ–Ω–∏—é.





–ò –≤ –∏—Ç–æ–≥–µ –≤ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —è–∑—ã–∫, –ø–æ—Ö–æ–∂—ã–π –Ω–∞ brainfuck

–¢–æ–ª—å–∫–æ —Ç–µ–ø–µ—Ä—å –Ω–∞–¥–æ –µ—â–µ –≤–≤–µ—Å—Ç–∏ —É—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

–û–¥–Ω—É —É—Å–ª–æ–≤–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é —è –∑–∞–¥–∞–ª –≤ –≤–∏–¥–µ –ø–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥–∞

symbol A._.B 

—ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –∫–æ–≥–¥–∞ —É –Ω–∞—Å –≤ –ø–æ—Ç–æ–∫–µ –±—É–¥–µ—Ç —Å–∏–º–≤–æ–ª B –∏ –ø—Ä–∏ —Ç–æ–º –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞ –Ω–∞–∑–∞–¥ –±—ã–ª A, —Ç–æ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

–Ω–æ —ç—Ç–æ –º–∞—Ç—á–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
—Ç—É—Ç —Å—Ä–∞–∑—É –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —á—Ç–æ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –ø—É—Å—Ç—ã–µ —Å–∏–º–≤–æ–ª—ã:
symbol EMPTY []

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–∞–∫—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç "—Å—ä–µ–¥–∞—Ç—å"  —Å–∏–º–≤–æ–ª—ã –ø–æ—Å–ª–µ —Å–µ–±—è.

–û—Å—Ç–∞–µ—Ç—Å—è –≤–æ–ø—Ä–æ—Å, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ–≥–æ —Ö–≤–∞—Ç–∏—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏?

–¢–æ –µ—Å—Ç—å –Ω–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –º–∞–∫—Ä–æ—Å–∞?

–ï–°–¢–¨ –ò–î–ï–Ø

macros NAME.ARG1.ARG2._.ARGN [ ... ]

–¢–û–¢ –ñ–ï –ü–¢–¢–ï–†–ù –ú–ê–¢–ß–ò–ù–ì, –Ω–æ —Å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–≥–æ —Ö–≤–æ—Å—Ç–∞!

–µ–±–∞...
–Ø –≥–µ–Ω–∏–π –∏–∑–≤—Ä–∞—â–µ–Ω–µ—Ü!

–û—Å—Ç–∞–µ—Ç—Å—è –≤–æ–ø—Ä–æ—Å: —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–∫–∏–ø–Ω—É—Ç—ã _ –∏–ª–∏ –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è?
–ø—Ä–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ - –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
–∞ –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ?...
–∏—Å–ø–æ–ª–Ω—è—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç –∫–∞–∫ –µ—Å–ª–∏ –±—ã –Ω–µ –±—ã–ª–æ –º–∞–∫—Ä–æ—Å–∞?
–º–º–º... –ø–æ–∫–∞ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç - –∏—Å–ø–æ–ª–Ω—è—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ—Å–∞.
–•–æ—Ç—è –∑–≤—É—á–∏—Ç –∫–∞–∫ —Å–∏–ª—å–Ω–æ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ




0 0000
1 0001
2 0010
3 0011
4 0100
5 0101
6 0110
7 0111
8 1000
9 1001
A 1010
B 1011
C 1100
D 1101
E 1110
F 1111

10001000 11100100
88 E4    mov ah, ah
10001000 11101101
88 ED    mov ch, ch
10001000 11110110
88 F6    mov dh, dh
10001000 11111111
88 FF    mov bh, bh













–ò—Ç–æ–≥–æ, —á—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å —è–∑—ã–∫–æ–º?

–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–æ–≤–∞ –∏–∑ –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞.

–¢–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∞—Ä—Å–∏—Ç—Å—è –∏ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ —Ç–∞–∫–∏–µ —Ç–æ–∫–µ–Ω—ã:
–°–∏–º–≤–æ–ª—ã - –ª–∏–±–æ–µ —Å–ª–æ–≤–æ –∏–∑ –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä. –ï—Å—Ç—å —Ä—è–¥ –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ —Å–æ —Å–≤–æ–∏–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º.
–°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã - –ø–æ–∫–∞ –≤–∏–∂—É —Ç–æ–ª—å–∫–æ $ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏.
–ë–∞–π—Ç—ã - –õ–∏–±–æ –≤ –≤–∏–¥–µ –±–∞–π—Ç–æ–≤ 0xFF, 0b1000 –ª–∏–±–æ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫ 'Hello, world!'
–°–∫–æ–±–∫–∏
[ ] –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏ –æ–∑–Ω–∞—á–∞—é—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É - –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –∏–∑ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –ø—Ä–∏ –∏—Ö –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ –ø–æ—Ç–æ–∫ –∏ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è. –ü–æ —Å—É—Ç–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ –æ–¥–∏–Ω.
( ) –∫—Ä—É–≥–ª—ã–µ —Å–∫–æ–±–∫–∏ –æ–∑–Ω–∞—á–∞—é—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ. –°–∏–º–≤–æ–ª—ã –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–º —á–∏—Å–ª–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏–º–≤–æ–ª–æ–≤ —Å–Ω–∞—Ä—É–∂–∏. –í—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–∫–æ–±–∫–∞—Ö –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–ª–∏ —Å—Ä–∞–∑—É –∏–ª–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ (–∫–∞–∫ –≤ —Å–ª—É—á–∞–µ —Å —Å–∏–º–≤–æ–ª–∞–º–∏)

–ó–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã:

–°–∏–º–≤–æ–ª—ã —Å–º–µ—â–µ–Ω–∏—è
  LEFT - —Å–º–µ—â–∞–µ—Ç –∫–æ—Ä–µ—Ç–∫—É –≤–ª–µ–≤–æ –Ω–∞ —á–∏—Å–ª–æ, —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–∏–º–≤–æ–ª–µ
  RIGHT - —Å–º–µ—â–∞–µ—Ç –∫–æ—Ä–µ—Ç–∫—É –≤–ø—Ä–∞–≤–æ –Ω–∞ —á–∏—Å–ª–æ, —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–∏–º–≤–æ–ª–µ
–î–ª—è —ç—Ç–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä: <N –∏ N> –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è –Ω–∞ N –≤–ª–µ–≤–æ –∏ –≤–ø—Ä–∞–≤–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
<N —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ LEFT N

–°–∏–º–≤–æ–ª—ã –∑–∞–ø–∏—Å–∏, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞ –Ω–∏–º –Ω–∞–±–æ—Ä—É –±–∞–π—Ç–æ–≤
  SET B     –ë–∞–π—Ç—ã B –∑–∞–º–µ—â–∞—é—Ç —Ç–µ–∫—É—â–∏–µ –±–∞–π—Ç—ã (–ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ)  
  OR B      –ë–∞–π—Ç—ã B –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ –ò–õ–ò
  AND B     –ë–∞–π—Ç—ã B –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ –ò
  XOR B     –ë–∞–π—Ç—ã B –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ –∏—Å–∫–ª—é—á–∞–µ—â–µ–≥–æ –ò–õ–ò
  APPEND B  –¢–æ –∂–µ —á—Ç–æ SET, –Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–æ–º —Å–º–µ—â–∞—é—Ç –∫–∞—Ä–µ—Ç–∫—É –Ω–∞ –∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç
–ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª –∑–∞–ø–∏—Å–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, —Ç–æ –±–∞–π—Ç—ã –¥–æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ APPEND
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤—Å—è–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–∫–≤–∞–ª—å–Ω–æ –±—É–¥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –±–∞–π—Ç–æ–≤.
–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–µ–≥–∫–æ –∏ –±–µ–∑ –≥–µ–º–æ—Ä–∞ –¥–µ–ª–∞—Ç—å –º–Ω–æ–≥–∏–µ —à—Ç—É–∫–∏.

–°–∏–º–≤–æ–ª—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
  symbol NAME SYMBOL - –≤–º–µ—Å—Ç–æ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ –∞—Ç–æ–º–∞—Ä–Ω—ã–π —Å–∏–º–≤–æ–ª. –ë–∞–π—Ç—ã –∏–ª–∏ –∏–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –∞–ª–∏–∞—Å—ã. –í—ã—Ä–∞–∂–µ–Ω–∏—è symbol NAME SYMBOL –∏ macros NAME SYMBOL –ø–æ —Å–≤–æ–µ–π —Å—É—Ç–∏ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã.
  symbol NAME [ ... ]
  macros NAME [ ... ]
  symbol A.B.C.NAME [ ... ]
  macros NAME.A.B.C [ ... ]
–û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥.
–¢–æ–ª—å–∫–æ —Å–∏–º–≤–æ–ª –º–∞—Ç—á–∏—Ç –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–∏–º–≤–æ–ª—ã, –∞ –º–∞–∫—Ä–æ—Å - —Å–ª–µ–¥—É—é—â–∏–µ.
–≠–ª–µ–º–µ–Ω—Ç—ã –º–∞—Ç—á–∏–Ω–≥–∞ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–∏–º–≤–æ–ª–∞–º–∏, –±–∞–π—Ç–∞–º–∏, –ø—Ä–æ–ø—É—Å–∫–æ–º _ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ $arg, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–ª–µ–µ –±—É–¥—É—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è –≤ —Ç–µ–ª–µ —Å–∏–º–≤–æ–ª–∞/–º–∞–∫—Ä–æ—Å–∞

–°–∏–º–≤–æ–ª—ã —Ä–∞–±–æ—Ç—ã —Å –±–∞–π—Ç–æ–≤—ã–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏... –≤–µ–¥—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç —É–ø–∏—Ä–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞–π—Ç–æ–≤—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –Ω–∞–ø—Ä–∏–º–µ—Ä

–ò–∏–∏...
–Ø –Ω–∞–∏–∑–æ–±—Ä–µ—Ç–∞–ª —Ü–µ–ª—ã–π –º–µ–≥–∞-—è–∑—ã–∫.
–ï—Å–ª–∏ –≤—ã–∫–∏–Ω—É—Ç—å –∏–∑ –Ω–µ–≥–æ —Ç–µ–º—É —Å –∫–∞—Ä–µ—Ç–∫–æ–π –∏ –±–∞–π—Ç–∞–º–∏, —Ç–æ —É –Ω–∞—Å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ç–∏–≤–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—Å–µ —É–ø–∏—Ä–∞–µ—Ç—Å—è –≤ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ—Ç–æ–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤.
–ò —è –Ω–µ –ø–æ–º–Ω—é, –≤–∏–¥–µ–ª –ª–∏ —è —Ç–∞–∫–∏–µ —è–∑—ã–∫–∏.